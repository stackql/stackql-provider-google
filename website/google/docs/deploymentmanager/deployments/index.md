--- 
title: deployments
hide_title: false
hide_table_of_contents: false
keywords:
  - deployments
  - deploymentmanager
  - google
  - infrastructure-as-code
  - configuration-as-data
  - cloud inventory
description: Query, deploy and manage google resources using SQL
custom_edit_url: null
image: /img/stackql-google-provider-featured-image.png
---

import CopyableCode from '@site/src/components/CopyableCode/CopyableCode';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Creates, updates, deletes, gets or lists a <code>deployments</code> resource.

## Overview
<table><tbody>
<tr><td><b>Name</b></td><td><code>deployments</code></td></tr>
<tr><td><b>Type</b></td><td>Resource</td></tr>
<tr><td><b>Id</b></td><td><CopyableCode code="google.deploymentmanager.deployments" /></td></tr>
</tbody></table>

## Fields

The following fields are returned by `SELECT` queries:

<Tabs
    defaultValue="get"
    values={[
        { label: 'get', value: 'get' },
        { label: 'list', value: 'list' }
    ]}
>
<TabItem value="get">

Successful response

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Datatype</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr>
    <td><CopyableCode code="id" /></td>
    <td><code>string (uint64)</code></td>
    <td></td>
</tr>
<tr>
    <td><CopyableCode code="name" /></td>
    <td><code>string</code></td>
    <td>Name of the resource; provided by the client when the resource is created. The name must be 1-63 characters long, and comply with RFC1035. Specifically, the name must be 1-63 characters long and match the regular expression `[a-z]([-a-z0-9]*[a-z0-9])?` which means the first character must be a lowercase letter, and all following characters must be a dash, lowercase letter, or digit, except the last character, which cannot be a dash.</td>
</tr>
<tr>
    <td><CopyableCode code="description" /></td>
    <td><code>string</code></td>
    <td>An optional user-provided description of the deployment.</td>
</tr>
<tr>
    <td><CopyableCode code="fingerprint" /></td>
    <td><code>string (byte)</code></td>
    <td>Provides a fingerprint to use in requests to modify a deployment, such as `update()`, `stop()`, and `cancelPreview()` requests. A fingerprint is a randomly generated value that must be provided with `update()`, `stop()`, and `cancelPreview()` requests to perform optimistic locking. This ensures optimistic concurrency so that only one request happens at a time. The fingerprint is initially generated by Deployment Manager and changes after every request to modify data. To get the latest fingerprint value, perform a `get()` request to a deployment.</td>
</tr>
<tr>
    <td><CopyableCode code="insertTime" /></td>
    <td><code>string</code></td>
    <td>Output only. Creation timestamp in RFC3339 text format.</td>
</tr>
<tr>
    <td><CopyableCode code="labels" /></td>
    <td><code>array</code></td>
    <td>Map of One Platform labels; provided by the client when the resource is created or updated. Specifically: Label keys must be between 1 and 63 characters long and must conform to the following regular expression: `[a-z]([-a-z0-9]*[a-z0-9])?` Label values must be between 0 and 63 characters long and must conform to the regular expression `([a-z]([-a-z0-9]*[a-z0-9])?)?`.</td>
</tr>
<tr>
    <td><CopyableCode code="manifest" /></td>
    <td><code>string</code></td>
    <td>Output only. URL of the manifest representing the last manifest that was successfully deployed. If no manifest has been successfully deployed, this field will be absent.</td>
</tr>
<tr>
    <td><CopyableCode code="operation" /></td>
    <td><code>object</code></td>
    <td>Output only. The Operation that most recently ran, or is currently running, on this deployment. (id: Operation)</td>
</tr>
<tr>
    <td><CopyableCode code="selfLink" /></td>
    <td><code>string</code></td>
    <td>Output only. Server defined URL for the resource.</td>
</tr>
<tr>
    <td><CopyableCode code="target" /></td>
    <td><code>object</code></td>
    <td>[Input Only] The parameters that define your deployment, including the deployment configuration and relevant templates. (id: TargetConfiguration)</td>
</tr>
<tr>
    <td><CopyableCode code="update" /></td>
    <td><code>object</code></td>
    <td>Output only. If Deployment Manager is currently updating or previewing an update to this deployment, the updated configuration appears here. (id: DeploymentUpdate)</td>
</tr>
<tr>
    <td><CopyableCode code="updateTime" /></td>
    <td><code>string</code></td>
    <td>Output only. Update timestamp in RFC3339 text format.</td>
</tr>
</tbody>
</table>
</TabItem>
<TabItem value="list">

A response containing a partial list of deployments and a page token used to build the next request if the request has been truncated.

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Datatype</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr>
    <td><CopyableCode code="deployments" /></td>
    <td><code>array</code></td>
    <td>Output only. The deployments contained in this response.</td>
</tr>
<tr>
    <td><CopyableCode code="nextPageToken" /></td>
    <td><code>string</code></td>
    <td>Output only. A token used to continue a truncated list request.</td>
</tr>
</tbody>
</table>
</TabItem>
</Tabs>

## Methods

The following methods are available for this resource:

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Accessible by</th>
    <th>Required Params</th>
    <th>Optional Params</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr>
    <td><a href="#get"><CopyableCode code="get" /></a></td>
    <td><CopyableCode code="select" /></td>
    <td><a href="#parameter-project"><code>project</code></a>, <a href="#parameter-deployment"><code>deployment</code></a></td>
    <td><a href="#parameter-header.bypassBillingFilter"><code>header.bypassBillingFilter</code></a></td>
    <td>Gets information about a specific deployment.</td>
</tr>
<tr>
    <td><a href="#list"><CopyableCode code="list" /></a></td>
    <td><CopyableCode code="select" /></td>
    <td><a href="#parameter-project"><code>project</code></a></td>
    <td><a href="#parameter-maxResults"><code>maxResults</code></a>, <a href="#parameter-pageToken"><code>pageToken</code></a>, <a href="#parameter-filter"><code>filter</code></a>, <a href="#parameter-orderBy"><code>orderBy</code></a></td>
    <td>Lists all deployments for a given project.</td>
</tr>
<tr>
    <td><a href="#insert"><CopyableCode code="insert" /></a></td>
    <td><CopyableCode code="insert" /></td>
    <td><a href="#parameter-project"><code>project</code></a></td>
    <td><a href="#parameter-preview"><code>preview</code></a>, <a href="#parameter-createPolicy"><code>createPolicy</code></a>, <a href="#parameter-header.bypassBillingFilter"><code>header.bypassBillingFilter</code></a></td>
    <td>Creates a deployment and all of the resources described by the deployment manifest.</td>
</tr>
<tr>
    <td><a href="#patch"><CopyableCode code="patch" /></a></td>
    <td><CopyableCode code="update" /></td>
    <td><a href="#parameter-project"><code>project</code></a>, <a href="#parameter-deployment"><code>deployment</code></a></td>
    <td><a href="#parameter-createPolicy"><code>createPolicy</code></a>, <a href="#parameter-deletePolicy"><code>deletePolicy</code></a>, <a href="#parameter-preview"><code>preview</code></a>, <a href="#parameter-header.bypassBillingFilter"><code>header.bypassBillingFilter</code></a></td>
    <td>Patches a deployment and all of the resources described by the deployment manifest.</td>
</tr>
<tr>
    <td><a href="#update"><CopyableCode code="update" /></a></td>
    <td><CopyableCode code="replace" /></td>
    <td><a href="#parameter-project"><code>project</code></a>, <a href="#parameter-deployment"><code>deployment</code></a></td>
    <td><a href="#parameter-createPolicy"><code>createPolicy</code></a>, <a href="#parameter-deletePolicy"><code>deletePolicy</code></a>, <a href="#parameter-preview"><code>preview</code></a>, <a href="#parameter-header.bypassBillingFilter"><code>header.bypassBillingFilter</code></a></td>
    <td>Updates a deployment and all of the resources described by the deployment manifest.</td>
</tr>
<tr>
    <td><a href="#delete"><CopyableCode code="delete" /></a></td>
    <td><CopyableCode code="delete" /></td>
    <td><a href="#parameter-project"><code>project</code></a>, <a href="#parameter-deployment"><code>deployment</code></a></td>
    <td><a href="#parameter-deletePolicy"><code>deletePolicy</code></a>, <a href="#parameter-header.bypassBillingFilter"><code>header.bypassBillingFilter</code></a></td>
    <td>Deletes a deployment and all of the resources in the deployment.</td>
</tr>
<tr>
    <td><a href="#cancel_preview"><CopyableCode code="cancel_preview" /></a></td>
    <td><CopyableCode code="exec" /></td>
    <td><a href="#parameter-project"><code>project</code></a>, <a href="#parameter-deployment"><code>deployment</code></a></td>
    <td></td>
    <td>Cancels and removes the preview currently associated with the deployment.</td>
</tr>
<tr>
    <td><a href="#stop"><CopyableCode code="stop" /></a></td>
    <td><CopyableCode code="exec" /></td>
    <td><a href="#parameter-project"><code>project</code></a>, <a href="#parameter-deployment"><code>deployment</code></a></td>
    <td></td>
    <td>Stops an ongoing operation. This does not roll back any work that has already been completed, but prevents any new work from being started.</td>
</tr>
</tbody>
</table>

## Parameters

Parameters can be passed in the `WHERE` clause of a query. Check the [Methods](#methods) section to see which parameters are required or optional for each operation.

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Datatype</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr id="parameter-deployment">
    <td><CopyableCode code="deployment" /></td>
    <td><code>string</code></td>
    <td></td>
</tr>
<tr id="parameter-project">
    <td><CopyableCode code="project" /></td>
    <td><code>string</code></td>
    <td></td>
</tr>
<tr id="parameter-createPolicy">
    <td><CopyableCode code="createPolicy" /></td>
    <td><code>string</code></td>
    <td></td>
</tr>
<tr id="parameter-deletePolicy">
    <td><CopyableCode code="deletePolicy" /></td>
    <td><code>string</code></td>
    <td></td>
</tr>
<tr id="parameter-filter">
    <td><CopyableCode code="filter" /></td>
    <td><code>string</code></td>
    <td></td>
</tr>
<tr id="parameter-header.bypassBillingFilter">
    <td><CopyableCode code="header.bypassBillingFilter" /></td>
    <td><code>boolean</code></td>
    <td></td>
</tr>
<tr id="parameter-maxResults">
    <td><CopyableCode code="maxResults" /></td>
    <td><code>integer (uint32)</code></td>
    <td></td>
</tr>
<tr id="parameter-orderBy">
    <td><CopyableCode code="orderBy" /></td>
    <td><code>string</code></td>
    <td></td>
</tr>
<tr id="parameter-pageToken">
    <td><CopyableCode code="pageToken" /></td>
    <td><code>string</code></td>
    <td></td>
</tr>
<tr id="parameter-preview">
    <td><CopyableCode code="preview" /></td>
    <td><code>boolean</code></td>
    <td></td>
</tr>
</tbody>
</table>

## `SELECT` examples

<Tabs
    defaultValue="get"
    values={[
        { label: 'get', value: 'get' },
        { label: 'list', value: 'list' }
    ]}
>
<TabItem value="get">

Gets information about a specific deployment.

```sql
SELECT
id,
name,
description,
fingerprint,
insertTime,
labels,
manifest,
operation,
selfLink,
target,
update,
updateTime
FROM google.deploymentmanager.deployments
WHERE project = '{{ project }}' -- required
AND deployment = '{{ deployment }}' -- required
AND header.bypassBillingFilter = '{{ header.bypassBillingFilter }}';
```
</TabItem>
<TabItem value="list">

Lists all deployments for a given project.

```sql
SELECT
deployments,
nextPageToken
FROM google.deploymentmanager.deployments
WHERE project = '{{ project }}' -- required
AND maxResults = '{{ maxResults }}'
AND pageToken = '{{ pageToken }}'
AND filter = '{{ filter }}'
AND orderBy = '{{ orderBy }}';
```
</TabItem>
</Tabs>


## `INSERT` examples

<Tabs
    defaultValue="insert"
    values={[
        { label: 'insert', value: 'insert' },
        { label: 'Manifest', value: 'manifest' }
    ]}
>
<TabItem value="insert">

Creates a deployment and all of the resources described by the deployment manifest.

```sql
INSERT INTO google.deploymentmanager.deployments (
data__id,
data__name,
data__description,
data__operation,
data__fingerprint,
data__manifest,
data__update,
data__insertTime,
data__updateTime,
data__target,
data__labels,
data__selfLink,
project,
preview,
createPolicy,
header.bypassBillingFilter
)
SELECT 
'{{ id }}',
'{{ name }}',
'{{ description }}',
'{{ operation }}',
'{{ fingerprint }}',
'{{ manifest }}',
'{{ update }}',
'{{ insertTime }}',
'{{ updateTime }}',
'{{ target }}',
'{{ labels }}',
'{{ selfLink }}',
'{{ project }}',
'{{ preview }}',
'{{ createPolicy }}',
'{{ header.bypassBillingFilter }}'
RETURNING
id,
name,
clientOperationId,
creationTimestamp,
description,
endTime,
error,
httpErrorMessage,
httpErrorStatusCode,
insertTime,
instancesBulkInsertOperationMetadata,
kind,
operationGroupId,
operationType,
progress,
region,
selfLink,
selfLinkWithId,
setAutoscalerLinkOperationMetadata,
setCommonInstanceMetadataOperationMetadata,
startTime,
status,
statusMessage,
targetId,
targetLink,
user,
warnings,
zone
;
```
</TabItem>
<TabItem value="manifest">

```yaml
# Description fields are for documentation purposes
- name: deployments
  props:
    - name: project
      value: string
      description: Required parameter for the deployments resource.
    - name: id
      value: string
    - name: name
      value: string
      description: >
        Name of the resource; provided by the client when the resource is created. The name must be 1-63 characters long, and comply with RFC1035. Specifically, the name must be 1-63 characters long and match the regular expression `[a-z]([-a-z0-9]*[a-z0-9])?` which means the first character must be a lowercase letter, and all following characters must be a dash, lowercase letter, or digit, except the last character, which cannot be a dash.
        
    - name: description
      value: string
      description: >
        An optional user-provided description of the deployment.
        
    - name: operation
      value: object
      description: >
        Output only. The Operation that most recently ran, or is currently running, on this deployment.
        
    - name: fingerprint
      value: string
      description: >
        Provides a fingerprint to use in requests to modify a deployment, such as `update()`, `stop()`, and `cancelPreview()` requests. A fingerprint is a randomly generated value that must be provided with `update()`, `stop()`, and `cancelPreview()` requests to perform optimistic locking. This ensures optimistic concurrency so that only one request happens at a time. The fingerprint is initially generated by Deployment Manager and changes after every request to modify data. To get the latest fingerprint value, perform a `get()` request to a deployment.
        
    - name: manifest
      value: string
      description: >
        Output only. URL of the manifest representing the last manifest that was successfully deployed. If no manifest has been successfully deployed, this field will be absent.
        
    - name: update
      value: object
      description: >
        Output only. If Deployment Manager is currently updating or previewing an update to this deployment, the updated configuration appears here.
        
    - name: insertTime
      value: string
      description: >
        Output only. Creation timestamp in RFC3339 text format.
        
    - name: updateTime
      value: string
      description: >
        Output only. Update timestamp in RFC3339 text format.
        
    - name: target
      value: object
      description: >
        [Input Only] The parameters that define your deployment, including the deployment configuration and relevant templates.
        
    - name: labels
      value: array
      description: >
        Map of One Platform labels; provided by the client when the resource is created or updated. Specifically: Label keys must be between 1 and 63 characters long and must conform to the following regular expression: `[a-z]([-a-z0-9]*[a-z0-9])?` Label values must be between 0 and 63 characters long and must conform to the regular expression `([a-z]([-a-z0-9]*[a-z0-9])?)?`.
        
    - name: selfLink
      value: string
      description: >
        Output only. Server defined URL for the resource.
        
    - name: preview
      value: boolean
    - name: createPolicy
      value: string
    - name: header.bypassBillingFilter
      value: boolean
```
</TabItem>
</Tabs>


## `UPDATE` examples

<Tabs
    defaultValue="patch"
    values={[
        { label: 'patch', value: 'patch' }
    ]}
>
<TabItem value="patch">

Patches a deployment and all of the resources described by the deployment manifest.

```sql
UPDATE google.deploymentmanager.deployments
SET 
data__id = '{{ id }}',
data__name = '{{ name }}',
data__description = '{{ description }}',
data__operation = '{{ operation }}',
data__fingerprint = '{{ fingerprint }}',
data__manifest = '{{ manifest }}',
data__update = '{{ update }}',
data__insertTime = '{{ insertTime }}',
data__updateTime = '{{ updateTime }}',
data__target = '{{ target }}',
data__labels = '{{ labels }}',
data__selfLink = '{{ selfLink }}'
WHERE 
project = '{{ project }}' --required
AND deployment = '{{ deployment }}' --required
AND createPolicy = '{{ createPolicy}}'
AND deletePolicy = '{{ deletePolicy}}'
AND preview = {{ preview}}
AND header.bypassBillingFilter = {{ header.bypassBillingFilter}}
RETURNING
id,
name,
clientOperationId,
creationTimestamp,
description,
endTime,
error,
httpErrorMessage,
httpErrorStatusCode,
insertTime,
instancesBulkInsertOperationMetadata,
kind,
operationGroupId,
operationType,
progress,
region,
selfLink,
selfLinkWithId,
setAutoscalerLinkOperationMetadata,
setCommonInstanceMetadataOperationMetadata,
startTime,
status,
statusMessage,
targetId,
targetLink,
user,
warnings,
zone;
```
</TabItem>
</Tabs>


## `REPLACE` examples

<Tabs
    defaultValue="update"
    values={[
        { label: 'update', value: 'update' }
    ]}
>
<TabItem value="update">

Updates a deployment and all of the resources described by the deployment manifest.

```sql
REPLACE google.deploymentmanager.deployments
SET 
data__id = '{{ id }}',
data__name = '{{ name }}',
data__description = '{{ description }}',
data__operation = '{{ operation }}',
data__fingerprint = '{{ fingerprint }}',
data__manifest = '{{ manifest }}',
data__update = '{{ update }}',
data__insertTime = '{{ insertTime }}',
data__updateTime = '{{ updateTime }}',
data__target = '{{ target }}',
data__labels = '{{ labels }}',
data__selfLink = '{{ selfLink }}'
WHERE 
project = '{{ project }}' --required
AND deployment = '{{ deployment }}' --required
AND createPolicy = '{{ createPolicy}}'
AND deletePolicy = '{{ deletePolicy}}'
AND preview = {{ preview}}
AND header.bypassBillingFilter = {{ header.bypassBillingFilter}}
RETURNING
id,
name,
clientOperationId,
creationTimestamp,
description,
endTime,
error,
httpErrorMessage,
httpErrorStatusCode,
insertTime,
instancesBulkInsertOperationMetadata,
kind,
operationGroupId,
operationType,
progress,
region,
selfLink,
selfLinkWithId,
setAutoscalerLinkOperationMetadata,
setCommonInstanceMetadataOperationMetadata,
startTime,
status,
statusMessage,
targetId,
targetLink,
user,
warnings,
zone;
```
</TabItem>
</Tabs>


## `DELETE` examples

<Tabs
    defaultValue="delete"
    values={[
        { label: 'delete', value: 'delete' }
    ]}
>
<TabItem value="delete">

Deletes a deployment and all of the resources in the deployment.

```sql
DELETE FROM google.deploymentmanager.deployments
WHERE project = '{{ project }}' --required
AND deployment = '{{ deployment }}' --required
AND deletePolicy = '{{ deletePolicy }}'
AND header.bypassBillingFilter = '{{ header.bypassBillingFilter }}';
```
</TabItem>
</Tabs>


## Lifecycle Methods

<Tabs
    defaultValue="cancel_preview"
    values={[
        { label: 'cancel_preview', value: 'cancel_preview' },
        { label: 'stop', value: 'stop' }
    ]}
>
<TabItem value="cancel_preview">

Cancels and removes the preview currently associated with the deployment.

```sql
EXEC google.deploymentmanager.deployments.cancel_preview 
@project='{{ project }}' --required, 
@deployment='{{ deployment }}' --required 
@@json=
'{
"fingerprint": "{{ fingerprint }}"
}';
```
</TabItem>
<TabItem value="stop">

Stops an ongoing operation. This does not roll back any work that has already been completed, but prevents any new work from being started.

```sql
EXEC google.deploymentmanager.deployments.stop 
@project='{{ project }}' --required, 
@deployment='{{ deployment }}' --required 
@@json=
'{
"fingerprint": "{{ fingerprint }}"
}';
```
</TabItem>
</Tabs>
