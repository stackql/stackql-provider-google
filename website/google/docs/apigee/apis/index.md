--- 
title: apis
hide_title: false
hide_table_of_contents: false
keywords:
  - apis
  - apigee
  - google
  - infrastructure-as-code
  - configuration-as-data
  - cloud inventory
description: Query, deploy and manage google resources using SQL
custom_edit_url: null
image: /img/stackql-google-provider-featured-image.png
---

import CopyableCode from '@site/src/components/CopyableCode/CopyableCode';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Creates, updates, deletes, gets or lists an <code>apis</code> resource.

## Overview
<table><tbody>
<tr><td><b>Name</b></td><td><code>apis</code></td></tr>
<tr><td><b>Type</b></td><td>Resource</td></tr>
<tr><td><b>Id</b></td><td><CopyableCode code="google.apigee.apis" /></td></tr>
</tbody></table>

## Fields

The following fields are returned by `SELECT` queries:

<Tabs
    defaultValue="organizations_apis_get"
    values={[
        { label: 'organizations_apis_get', value: 'organizations_apis_get' },
        { label: 'organizations_apis_list', value: 'organizations_apis_list' }
    ]}
>
<TabItem value="organizations_apis_get">

Metadata describing the API proxy

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Datatype</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr>
    <td><CopyableCode code="name" /></td>
    <td><code>string</code></td>
    <td>Output only. Name of the API proxy.</td>
</tr>
<tr>
    <td><CopyableCode code="apiProxyType" /></td>
    <td><code>string</code></td>
    <td>Output only. The type of the API proxy.</td>
</tr>
<tr>
    <td><CopyableCode code="labels" /></td>
    <td><code>object</code></td>
    <td>User labels applied to this API Proxy.</td>
</tr>
<tr>
    <td><CopyableCode code="latestRevisionId" /></td>
    <td><code>string</code></td>
    <td>Output only. The id of the most recently created revision for this api proxy.</td>
</tr>
<tr>
    <td><CopyableCode code="metaData" /></td>
    <td><code>object</code></td>
    <td>Output only. Metadata describing the API proxy. (id: GoogleCloudApigeeV1EntityMetadata)</td>
</tr>
<tr>
    <td><CopyableCode code="readOnly" /></td>
    <td><code>boolean</code></td>
    <td>Output only. Whether this proxy is read-only. A read-only proxy cannot have new revisions created through calls to CreateApiProxyRevision. A proxy is read-only if it was generated by an archive.</td>
</tr>
<tr>
    <td><CopyableCode code="revision" /></td>
    <td><code>array</code></td>
    <td>Output only. List of revisions defined for the API proxy.</td>
</tr>
<tr>
    <td><CopyableCode code="space" /></td>
    <td><code>string</code></td>
    <td>Optional. The id of the space this proxy is associated with. Any IAM policies applied to the space will control access to this proxy. To learn how Spaces can be used to manage resources, read the [Apigee Spaces Overview](https://cloud.google.com/apigee/docs/api-platform/system-administration/spaces/apigee-spaces-overview).</td>
</tr>
</tbody>
</table>
</TabItem>
<TabItem value="organizations_apis_list">

Successful response

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Datatype</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr>
    <td><CopyableCode code="proxies" /></td>
    <td><code>array</code></td>
    <td></td>
</tr>
</tbody>
</table>
</TabItem>
</Tabs>

## Methods

The following methods are available for this resource:

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Accessible by</th>
    <th>Required Params</th>
    <th>Optional Params</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr>
    <td><a href="#organizations_apis_get"><CopyableCode code="organizations_apis_get" /></a></td>
    <td><CopyableCode code="select" /></td>
    <td><a href="#parameter-organizationsId"><code>organizationsId</code></a>, <a href="#parameter-apisId"><code>apisId</code></a></td>
    <td></td>
    <td>Gets an API proxy including a list of existing revisions.</td>
</tr>
<tr>
    <td><a href="#organizations_apis_list"><CopyableCode code="organizations_apis_list" /></a></td>
    <td><CopyableCode code="select" /></td>
    <td><a href="#parameter-organizationsId"><code>organizationsId</code></a></td>
    <td><a href="#parameter-includeRevisions"><code>includeRevisions</code></a>, <a href="#parameter-includeMetaData"><code>includeMetaData</code></a>, <a href="#parameter-space"><code>space</code></a></td>
    <td>Lists the names of all API proxies in an organization. The names returned correspond to the names defined in the configuration files for each API proxy. If the resource has the `space` attribute set, the response may not return all resources. To learn more, read the [Apigee Spaces Overview](https://cloud.google.com/apigee/docs/api-platform/system-administration/spaces/apigee-spaces-overview).</td>
</tr>
<tr>
    <td><a href="#organizations_apis_create"><CopyableCode code="organizations_apis_create" /></a></td>
    <td><CopyableCode code="insert" /></td>
    <td><a href="#parameter-organizationsId"><code>organizationsId</code></a></td>
    <td><a href="#parameter-name"><code>name</code></a>, <a href="#parameter-action"><code>action</code></a>, <a href="#parameter-validate"><code>validate</code></a>, <a href="#parameter-space"><code>space</code></a></td>
    <td>Creates an API proxy. The API proxy created will not be accessible at runtime until it is deployed to an environment. Create a new API proxy by setting the `name` query parameter to the name of the API proxy. Import an API proxy configuration bundle stored in zip format on your local machine to your organization by doing the following: * Set the `name` query parameter to the name of the API proxy. * Set the `action` query parameter to `import`. * Set the `Content-Type` header to `multipart/form-data`. * Pass as a file the name of API proxy configuration bundle stored in zip format on your local machine using the `file` form field. **Note**: To validate the API proxy configuration bundle only without importing it, set the `action` query parameter to `validate`. When importing an API proxy configuration bundle, if the API proxy does not exist, it will be created. If the API proxy exists, then a new revision is created. Invalid API proxy configurations are rejected, and a list of validation errors is returned to the client.</td>
</tr>
<tr>
    <td><a href="#organizations_apis_patch"><CopyableCode code="organizations_apis_patch" /></a></td>
    <td><CopyableCode code="update" /></td>
    <td><a href="#parameter-organizationsId"><code>organizationsId</code></a>, <a href="#parameter-apisId"><code>apisId</code></a></td>
    <td><a href="#parameter-updateMask"><code>updateMask</code></a></td>
    <td>Updates an existing API proxy.</td>
</tr>
<tr>
    <td><a href="#organizations_apis_delete"><CopyableCode code="organizations_apis_delete" /></a></td>
    <td><CopyableCode code="delete" /></td>
    <td><a href="#parameter-organizationsId"><code>organizationsId</code></a>, <a href="#parameter-apisId"><code>apisId</code></a></td>
    <td></td>
    <td>Deletes an API proxy and all associated endpoints, policies, resources, and revisions. The API proxy must be undeployed before you can delete it.</td>
</tr>
<tr>
    <td><a href="#organizations_apis_move"><CopyableCode code="organizations_apis_move" /></a></td>
    <td><CopyableCode code="exec" /></td>
    <td><a href="#parameter-organizationsId"><code>organizationsId</code></a>, <a href="#parameter-apisId"><code>apisId</code></a></td>
    <td></td>
    <td>Moves an API proxy to a different space.</td>
</tr>
</tbody>
</table>

## Parameters

Parameters can be passed in the `WHERE` clause of a query. Check the [Methods](#methods) section to see which parameters are required or optional for each operation.

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Datatype</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr id="parameter-apisId">
    <td><CopyableCode code="apisId" /></td>
    <td><code>string</code></td>
    <td></td>
</tr>
<tr id="parameter-organizationsId">
    <td><CopyableCode code="organizationsId" /></td>
    <td><code>string</code></td>
    <td></td>
</tr>
<tr id="parameter-action">
    <td><CopyableCode code="action" /></td>
    <td><code>string</code></td>
    <td></td>
</tr>
<tr id="parameter-includeMetaData">
    <td><CopyableCode code="includeMetaData" /></td>
    <td><code>boolean</code></td>
    <td></td>
</tr>
<tr id="parameter-includeRevisions">
    <td><CopyableCode code="includeRevisions" /></td>
    <td><code>boolean</code></td>
    <td></td>
</tr>
<tr id="parameter-name">
    <td><CopyableCode code="name" /></td>
    <td><code>string</code></td>
    <td></td>
</tr>
<tr id="parameter-space">
    <td><CopyableCode code="space" /></td>
    <td><code>string</code></td>
    <td></td>
</tr>
<tr id="parameter-updateMask">
    <td><CopyableCode code="updateMask" /></td>
    <td><code>string (google-fieldmask)</code></td>
    <td></td>
</tr>
<tr id="parameter-validate">
    <td><CopyableCode code="validate" /></td>
    <td><code>boolean</code></td>
    <td></td>
</tr>
</tbody>
</table>

## `SELECT` examples

<Tabs
    defaultValue="organizations_apis_get"
    values={[
        { label: 'organizations_apis_get', value: 'organizations_apis_get' },
        { label: 'organizations_apis_list', value: 'organizations_apis_list' }
    ]}
>
<TabItem value="organizations_apis_get">

Gets an API proxy including a list of existing revisions.

```sql
SELECT
name,
apiProxyType,
labels,
latestRevisionId,
metaData,
readOnly,
revision,
space
FROM google.apigee.apis
WHERE organizationsId = '{{ organizationsId }}' -- required
AND apisId = '{{ apisId }}' -- required;
```
</TabItem>
<TabItem value="organizations_apis_list">

Lists the names of all API proxies in an organization. The names returned correspond to the names defined in the configuration files for each API proxy. If the resource has the `space` attribute set, the response may not return all resources. To learn more, read the [Apigee Spaces Overview](https://cloud.google.com/apigee/docs/api-platform/system-administration/spaces/apigee-spaces-overview).

```sql
SELECT
proxies
FROM google.apigee.apis
WHERE organizationsId = '{{ organizationsId }}' -- required
AND includeRevisions = '{{ includeRevisions }}'
AND includeMetaData = '{{ includeMetaData }}'
AND space = '{{ space }}';
```
</TabItem>
</Tabs>


## `INSERT` examples

<Tabs
    defaultValue="organizations_apis_create"
    values={[
        { label: 'organizations_apis_create', value: 'organizations_apis_create' },
        { label: 'Manifest', value: 'manifest' }
    ]}
>
<TabItem value="organizations_apis_create">

Creates an API proxy. The API proxy created will not be accessible at runtime until it is deployed to an environment. Create a new API proxy by setting the `name` query parameter to the name of the API proxy. Import an API proxy configuration bundle stored in zip format on your local machine to your organization by doing the following: * Set the `name` query parameter to the name of the API proxy. * Set the `action` query parameter to `import`. * Set the `Content-Type` header to `multipart/form-data`. * Pass as a file the name of API proxy configuration bundle stored in zip format on your local machine using the `file` form field. **Note**: To validate the API proxy configuration bundle only without importing it, set the `action` query parameter to `validate`. When importing an API proxy configuration bundle, if the API proxy does not exist, it will be created. If the API proxy exists, then a new revision is created. Invalid API proxy configurations are rejected, and a list of validation errors is returned to the client.

```sql
INSERT INTO google.apigee.apis (
data__contentType,
data__data,
data__extensions,
organizationsId,
name,
action,
validate,
space
)
SELECT 
'{{ contentType }}',
'{{ data }}',
'{{ extensions }}',
'{{ organizationsId }}',
'{{ name }}',
'{{ action }}',
'{{ validate }}',
'{{ space }}'
RETURNING
name,
archive,
basepaths,
configurationVersion,
contextInfo,
createdAt,
description,
displayName,
entityMetaDataAsProperties,
hasExtensiblePolicy,
integrationEndpoints,
lastModifiedAt,
policies,
proxies,
proxyEndpoints,
resourceFiles,
resources,
revision,
sharedFlows,
spec,
targetEndpoints,
targetServers,
targets,
teams,
type
;
```
</TabItem>
<TabItem value="manifest">

```yaml
# Description fields are for documentation purposes
- name: apis
  props:
    - name: organizationsId
      value: string
      description: Required parameter for the apis resource.
    - name: contentType
      value: string
      description: >
        The HTTP Content-Type header value specifying the content type of the body.
        
    - name: data
      value: string
      description: >
        The HTTP request/response body as raw binary.
        
    - name: extensions
      value: array
      description: >
        Application specific response metadata. Must be set in the first response for streaming APIs.
        
    - name: name
      value: string
    - name: action
      value: string
    - name: validate
      value: boolean
    - name: space
      value: string
```
</TabItem>
</Tabs>


## `UPDATE` examples

<Tabs
    defaultValue="organizations_apis_patch"
    values={[
        { label: 'organizations_apis_patch', value: 'organizations_apis_patch' }
    ]}
>
<TabItem value="organizations_apis_patch">

Updates an existing API proxy.

```sql
UPDATE google.apigee.apis
SET 
data__labels = '{{ labels }}',
data__space = '{{ space }}'
WHERE 
organizationsId = '{{ organizationsId }}' --required
AND apisId = '{{ apisId }}' --required
AND updateMask = '{{ updateMask}}'
RETURNING
name,
apiProxyType,
labels,
latestRevisionId,
metaData,
readOnly,
revision,
space;
```
</TabItem>
</Tabs>


## `DELETE` examples

<Tabs
    defaultValue="organizations_apis_delete"
    values={[
        { label: 'organizations_apis_delete', value: 'organizations_apis_delete' }
    ]}
>
<TabItem value="organizations_apis_delete">

Deletes an API proxy and all associated endpoints, policies, resources, and revisions. The API proxy must be undeployed before you can delete it.

```sql
DELETE FROM google.apigee.apis
WHERE organizationsId = '{{ organizationsId }}' --required
AND apisId = '{{ apisId }}' --required;
```
</TabItem>
</Tabs>


## Lifecycle Methods

<Tabs
    defaultValue="organizations_apis_move"
    values={[
        { label: 'organizations_apis_move', value: 'organizations_apis_move' }
    ]}
>
<TabItem value="organizations_apis_move">

Moves an API proxy to a different space.

```sql
EXEC google.apigee.apis.organizations_apis_move 
@organizationsId='{{ organizationsId }}' --required, 
@apisId='{{ apisId }}' --required 
@@json=
'{
"space": "{{ space }}"
}';
```
</TabItem>
</Tabs>
